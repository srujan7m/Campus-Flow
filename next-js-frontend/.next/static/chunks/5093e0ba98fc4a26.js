(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66088,e=>{"use strict";var t=e.i(1972),s=e.i(75305),a=e.i(30499),n=e.i(23536),i=e.i(84675),r=e.i(74679),d=e.i(49110),l=e.i(60039),c=e.i(62412),o=e.i(91071),m=e.i(2870),x=e.i(96755),u=e.i(10965);let h=(0,u.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),p=(0,u.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),j=(0,u.default)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var g=e.i(34290),f=e.i(58595),y=e.i(90768),v=e.i(74041);let N=(0,u.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var b=e.i(11741);let w=(0,u.default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),C=(0,u.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),k=(0,u.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),D=(0,u.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),T=(0,u.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var P=e.i(19033),A=e.i(58438),S=e.i(59371),F=e.i(67881),I=e.i(23750),L=e.i(70065),E=e.i(94179),B=e.i(10708),M=e.i(78896),R=e.i(21463),U=e.i(76567),q=e.i(93142),z=e.i(95264),$=e.i(37777),H=e.i(45081),O=e.i(19960),Q="Tabs",[V,G]=(0,R.createContextScope)(Q,[U.createRovingFocusGroupScope]),K=(0,U.createRovingFocusGroupScope)(),[X,_]=V(Q),J=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:n,onValueChange:i,defaultValue:r,orientation:d="horizontal",dir:l,activationMode:c="automatic",...o}=e,m=(0,$.useDirection)(l),[x,u]=(0,H.useControllableState)({prop:n,onChange:i,defaultProp:r});return(0,t.jsx)(X,{scope:a,baseId:(0,O.useId)(),value:x,onValueChange:u,orientation:d,dir:m,activationMode:c,children:(0,t.jsx)(z.Primitive.div,{dir:m,"data-orientation":d,...o,ref:s})})});J.displayName=Q;var W="TabsList",Y=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:n=!0,...i}=e,r=_(W,a),d=K(a);return(0,t.jsx)(U.Root,{asChild:!0,...d,orientation:r.orientation,dir:r.dir,loop:n,children:(0,t.jsx)(z.Primitive.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:s})})});Y.displayName=W;var Z="TabsTrigger",ee=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:n,disabled:i=!1,...r}=e,d=_(Z,a),l=K(a),c=ea(d.baseId,n),o=en(d.baseId,n),m=n===d.value;return(0,t.jsx)(U.Item,{asChild:!0,...l,focusable:!i,active:m,children:(0,t.jsx)(z.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":o,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...r,ref:s,onMouseDown:(0,M.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,M.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,M.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;m||i||!e||d.onValueChange(n)})})})});ee.displayName=Z;var et="TabsContent",es=s.forwardRef((e,a)=>{let{__scopeTabs:n,value:i,forceMount:r,children:d,...l}=e,c=_(et,n),o=ea(c.baseId,i),m=en(c.baseId,i),x=i===c.value,u=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(q.Presence,{present:r||x,children:({present:s})=>(0,t.jsx)(z.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":o,hidden:!s,id:m,tabIndex:0,...l,ref:a,style:{...e.style,animationDuration:u.current?"0s":void 0},children:s&&d})})});function ea(e,t){return`${e}-trigger-${t}`}function en(e,t){return`${e}-content-${t}`}es.displayName=et;var ei=e.i(47163);function er({className:e,...s}){return(0,t.jsx)(J,{"data-slot":"tabs",className:(0,ei.cn)("flex flex-col gap-2",e),...s})}function ed({className:e,...s}){return(0,t.jsx)(Y,{"data-slot":"tabs-list",className:(0,ei.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function el({className:e,...s}){return(0,t.jsx)(ee,{"data-slot":"tabs-trigger",className:(0,ei.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function ec({className:e,...s}){return(0,t.jsx)(es,{"data-slot":"tabs-content",className:(0,ei.cn)("flex-1 outline-none",e),...s})}function eo({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,ei.cn)("w-full caption-bottom text-sm",e),...s})})}function em({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,ei.cn)("[&_tr]:border-b",e),...s})}function ex({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,ei.cn)("[&_tr:last-child]:border-0",e),...s})}function eu({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,ei.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function eh({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,ei.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function ep({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,ei.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.i(54259);var ej=e.i(3187),eg=e.i(62927),ef=e.i(63968),ey=e.i(63659),ev=e.i(64891),eN=e.i(86745),eb=e.i(61409);e.i(60164);let ew="http://localhost:5001/api",eC=async e=>{let t=await fetch(`${ew}/tickets/${e}`);if(!t.ok)throw Error("Failed to fetch tickets");let s=await t.json();return s.tickets||s},ek=async({ticketId:e,answer:t})=>{let s=await fetch(`${ew}/tickets/${e}/reply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({replyText:t})});if(!s.ok)throw Error("Failed to reply to ticket");return s.json()},eD=async({ticketId:e,status:t})=>{let s=await fetch(`${ew}/tickets/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!s.ok)throw Error("Failed to update ticket status");return s.json()},eT={all:["tickets"],lists:()=>[...eT.all,"list"],list:e=>[...eT.lists(),e]};var eP=e.i(62543);let eA=async e=>{let t=await fetch("http://localhost:5001/webhook/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).message||"Failed to send poll");return t.json()};var eS=e.i(95403),eF=e.i(30902);function eI(){let e,u,M=(0,a.useParams)(),R=(0,a.useRouter)(),U=M.code,{data:q,isLoading:z}=(0,ey.useEvent)(U),{data:$,isLoading:H}=(0,ev.useQuery)({queryKey:eT.list(U),queryFn:()=>eC(U),enabled:!!U&&"undefined"!==U}),{data:O,isLoading:Q}=(0,eP.useRegistrations)(U),{data:V,isLoading:G}=(0,ey.useDocuments)(U),K=(0,ey.useUploadDocument)(),X=(0,ey.useUploadIndoorMap)(),_=(0,ey.useDeleteDocument)(),J=(e=(0,eb.useQueryClient)(),(0,eN.useMutation)({mutationFn:e=>ek(e),onSuccess:()=>{e.invalidateQueries({queryKey:eT.all})}})),W=(u=(0,eb.useQueryClient)(),(0,eN.useMutation)({mutationFn:e=>eD(e),onSuccess:()=>{u.invalidateQueries({queryKey:eT.all})}})),Y=(0,eN.useMutation)({mutationFn:e=>eA(e)}),Z=(0,ey.useDeleteEvent)(),[ee,et]=(0,s.useState)("overview"),[es,ea]=(0,s.useState)({}),[en,ei]=(0,s.useState)(""),[ew,eI]=(0,s.useState)(["",""]),[eL,eE]=(0,s.useState)(!1),eB=async()=>{if(q&&confirm(`Are you sure you want to delete "${q.name}"? This action cannot be undone and will delete all associated registrations, tickets, and data.`)){eE(!0);try{await Z.mutateAsync(q.id),eS.toast.success("Event deleted successfully"),R.push("/events")}catch(t){let e=t instanceof Error?t.message:"Failed to delete event";eS.toast.error(e),eE(!1)}}},eM=async e=>{let t=e.target.files?.[0];if(t)try{await K.mutateAsync({eventCode:U,file:t}),eS.toast.success("Document uploaded! Processing will begin shortly.")}catch{eS.toast.error("Failed to upload document")}},eR=async e=>{let t=e.target.files?.[0];if(t)try{await X.mutateAsync({eventCode:U,file:t}),eS.toast.success("Indoor map uploaded successfully!")}catch{eS.toast.error("Failed to upload indoor map")}},eU=async(e,t)=>{if(confirm(`Delete "${t}"? This will remove the document and all its indexed content from the AI knowledge base.`))try{await _.mutateAsync({eventCode:U,docId:e}),eS.toast.success("Document deleted successfully")}catch{eS.toast.error("Failed to delete document")}},eq=async e=>{let t=es[e];if(t)try{await J.mutateAsync({ticketId:e,answer:t}),ea(t=>({...t,[e]:""})),eS.toast.success("Reply sent successfully!")}catch{eS.toast.error("Failed to send reply")}},ez=async e=>{try{await W.mutateAsync({ticketId:e,status:"flagged"}),eS.toast.success("Ticket flagged for review")}catch{eS.toast.error("Failed to flag ticket")}},e$=async()=>{if(!q?.telegramChatId)return void eS.toast.error("No Telegram chat ID configured for this event");if(!en||ew.filter(e=>e.trim()).length<2)return void eS.toast.error("Please provide a question and at least 2 options");try{await Y.mutateAsync({chatId:q.telegramChatId,question:en,options:ew.filter(e=>e.trim())}),ei(""),eI(["",""]),eS.toast.success("Poll sent successfully!")}catch{eS.toast.error("Failed to send poll")}};return z?(0,t.jsx)(P.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):q?(0,t.jsx)(P.DashboardLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(A.PageHeader,{title:q.name,description:`Event Code: ${q.code}`,children:[(0,t.jsxs)(F.Button,{variant:"ghost",onClick:()=>R.push("/events"),children:[(0,t.jsx)(i.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)(F.Button,{variant:"destructive",onClick:eB,disabled:eL,children:[(0,t.jsx)(b.Trash2,{className:"mr-2 h-4 w-4"}),eL?"Deleting...":"Delete Event"]}),(0,t.jsxs)(F.Button,{variant:"outline",onClick:()=>window.open(`/events/${q.code}`,"_blank"),children:[(0,t.jsx)(f.ExternalLink,{className:"mr-2 h-4 w-4"}),"View Public Page"]})]}),(0,t.jsxs)(er,{value:ee,onValueChange:et,children:[(0,t.jsxs)(ed,{className:"grid w-full grid-cols-6",children:[(0,t.jsx)(el,{value:"overview",children:"Overview"}),(0,t.jsx)(el,{value:"documents",children:"Documents"}),(0,t.jsx)(el,{value:"tickets",children:"Tickets"}),(0,t.jsx)(el,{value:"registrations",children:"Registrations"}),(0,t.jsx)(el,{value:"poll",children:"Poll"}),(0,t.jsx)(el,{value:"checkin",children:"Check-In"})]}),(0,t.jsx)(ec,{value:"overview",className:"mt-6",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(L.Card,{children:[(0,t.jsx)(L.CardHeader,{children:(0,t.jsx)(L.CardTitle,{children:"Event Details"})}),(0,t.jsxs)(L.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.Label,{className:"text-muted-foreground",children:"Event Code"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"flex-1 rounded bg-muted px-3 py-2 font-mono",children:q.code}),(0,t.jsx)(F.Button,{size:"icon",variant:"outline",onClick:()=>{var e;return e=q.code,void(navigator.clipboard.writeText(e),eS.toast.success("Copied to clipboard!"))},children:(0,t.jsx)(v.Copy,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.Label,{className:"text-muted-foreground",children:"Description"}),(0,t.jsx)("p",{className:"text-sm",children:q.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(B.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(r.Calendar,{className:"h-4 w-4"}),"Date"]}),(0,t.jsx)("p",{className:"text-sm font-medium",children:(()=>{try{return(0,eF.format)(new Date(q.date),"PPP 'at' p")}catch{return"Invalid Date"}})()})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(B.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(l.DollarSign,{className:"h-4 w-4"}),"Price"]}),(0,t.jsxs)("p",{className:"text-sm font-medium",children:["₹",q.ticketPrice]})]})]})]})]}),(0,t.jsxs)(L.Card,{children:[(0,t.jsx)(L.CardHeader,{children:(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.MapPin,{className:"h-5 w-5"}),"Location"]})}),(0,t.jsxs)(L.CardContent,{className:"space-y-4",children:[(0,t.jsx)(ej.EventMap,{lat:q.lat,lng:q.lng,address:q.address,eventName:q.name,height:"250px"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.Label,{className:"text-muted-foreground",children:"Address"}),(0,t.jsx)("p",{className:"text-sm",children:q.address})]}),q.telegramChatId&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(B.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(o.MessageSquare,{className:"h-4 w-4"}),"Telegram Chat ID"]}),(0,t.jsx)("p",{className:"text-sm font-mono",children:q.telegramChatId})]})]})]})]})}),(0,t.jsx)(ec,{value:"documents",className:"mt-6",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,t.jsxs)(L.Card,{className:"border-primary/20 bg-primary/5",children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(C,{className:"h-5 w-5"}),"AI Knowledge Base Status"]}),(0,t.jsx)(L.CardDescription,{children:"Documents uploaded here are processed, chunked, and indexed with Gemini embeddings for the Telegram bot to answer attendee questions."})]}),(0,t.jsx)(L.CardContent,{children:G?(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)(y.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):V?.stats?(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:V.stats.totalDocuments}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Documents"})]}),(0,t.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:V.stats.indexedDocuments}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Indexed"})]}),(0,t.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:V.stats.processingDocuments}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Processing"})]}),(0,t.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:V.stats.totalChunks}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Text Chunks"})]}),(0,t.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,t.jsx)(E.Badge,{variant:V.stats.ragEnabled?"default":"secondary",className:"text-sm",children:V.stats.ragEnabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{className:"h-3 w-3 mr-1"})," RAG Active"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{className:"h-3 w-3 mr-1"})," No Data"]})}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Bot Status"})]})]}):(0,t.jsx)("div",{className:"text-center text-muted-foreground py-4",children:"No documents uploaded yet. Upload documents to enable AI-powered Q&A."})})]}),(0,t.jsxs)(L.Card,{children:[(0,t.jsx)(L.CardHeader,{children:(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(w,{className:"h-5 w-5"}),"How Document Indexing Works"]})}),(0,t.jsx)(L.CardContent,{children:(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,t.jsx)(h,{className:"h-5 w-5 text-primary"})}),(0,t.jsx)("div",{className:"font-medium",children:"1. Upload"}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:"Upload PDF, DOCX, or TXT files"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,t.jsx)(c.FileText,{className:"h-5 w-5 text-primary"})}),(0,t.jsx)("div",{className:"font-medium",children:"2. Parse & Chunk"}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:"Text extracted and split into chunks (~400 tokens each)"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,t.jsx)(w,{className:"h-5 w-5 text-primary"})}),(0,t.jsx)("div",{className:"font-medium",children:"3. Embed & Store"}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:"Gemini generates 768-dim embeddings, stored in Firestore"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,t.jsx)(C,{className:"h-5 w-5 text-primary"})}),(0,t.jsx)("div",{className:"font-medium",children:"4. RAG Query"}),(0,t.jsx)("div",{className:"text-muted-foreground text-xs",children:"Bot retrieves relevant chunks via cosine similarity"})]})]})})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.FileText,{className:"h-5 w-5"}),"Upload Document"]}),(0,t.jsx)(L.CardDescription,{children:"Upload PDF, DOCX, or TXT files for the AI to answer questions from"})]}),(0,t.jsx)(L.CardContent,{children:(0,t.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[(0,t.jsx)(h,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)(B.Label,{htmlFor:"document-upload",className:"cursor-pointer text-primary hover:underline",children:"Click to upload or drag and drop"}),(0,t.jsx)(I.Input,{id:"document-upload",type:"file",accept:".pdf,.docx,.txt",className:"hidden",onChange:eM,disabled:K.isPending}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"PDF, DOCX, or TXT up to 10MB"}),K.isPending&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}),"Uploading..."]})]})})]}),(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(N,{className:"h-5 w-5"}),"Indoor Map"]}),(0,t.jsx)(L.CardDescription,{children:"Upload a floor plan image for attendee navigation"})]}),(0,t.jsx)(L.CardContent,{children:(0,t.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[(0,t.jsx)(N,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)(B.Label,{htmlFor:"map-upload",className:"cursor-pointer text-primary hover:underline",children:"Click to upload or drag and drop"}),(0,t.jsx)(I.Input,{id:"map-upload",type:"file",accept:"image/*",className:"hidden",onChange:eR,disabled:X.isPending}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG, JPG, or WebP up to 5MB"}),X.isPending&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}),"Uploading..."]})]})})]})]}),(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.FileText,{className:"h-5 w-5"}),"Uploaded Documents"]}),(0,t.jsx)(L.CardDescription,{children:"Documents indexed for the AI knowledge base"})]}),(0,t.jsx)(L.CardContent,{children:G?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(y.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):V?.documents&&V.documents.length>0?(0,t.jsxs)(eo,{children:[(0,t.jsx)(em,{children:(0,t.jsxs)(eu,{children:[(0,t.jsx)(eh,{children:"Filename"}),(0,t.jsx)(eh,{children:"Status"}),(0,t.jsx)(eh,{children:"Chunks"}),(0,t.jsx)(eh,{children:"Uploaded"}),(0,t.jsx)(eh,{children:"Indexed"}),(0,t.jsx)(eh,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(ex,{children:V.documents.map(e=>(0,t.jsxs)(eu,{children:[(0,t.jsx)(ep,{className:"font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.FileText,{className:"h-4 w-4 text-muted-foreground"}),e.filename]})}),(0,t.jsx)(ep,{children:"indexed"===e.status?(0,t.jsxs)(E.Badge,{variant:"default",className:"bg-green-600",children:[(0,t.jsx)(k,{className:"h-3 w-3 mr-1"}),"Indexed"]}):(0,t.jsxs)(E.Badge,{variant:"secondary",children:[(0,t.jsx)(D,{className:"h-3 w-3 mr-1 animate-spin"}),"Processing"]})}),(0,t.jsx)(ep,{children:(0,t.jsx)("span",{className:"font-mono text-sm",children:e.chunkCount})}),(0,t.jsx)(ep,{children:e.uploadedAt?(0,eF.format)(new Date(e.uploadedAt),"PP"):"N/A"}),(0,t.jsx)(ep,{children:e.processedAt?(0,eF.format)(new Date(e.processedAt),"PP p"):"-"}),(0,t.jsx)(ep,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[e.storageUrl&&(0,t.jsx)(F.Button,{size:"icon",variant:"ghost",onClick:()=>window.open(e.storageUrl,"_blank"),children:(0,t.jsx)(f.ExternalLink,{className:"h-4 w-4"})}),(0,t.jsx)(F.Button,{size:"icon",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>eU(e.id,e.filename),disabled:_.isPending,children:_.isPending?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(b.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]}):(0,t.jsx)(S.EmptyState,{icon:c.FileText,title:"No documents uploaded",description:"Upload documents to enable AI-powered Q&A for your attendees via the Telegram bot"})})]})]})}),(0,t.jsx)(ec,{value:"tickets",className:"mt-6",children:(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.MessageSquare,{className:"h-5 w-5"}),"Support Tickets"]}),(0,t.jsx)(L.CardDescription,{children:"Manage questions from attendees via Telegram. The AI auto-answers questions using your uploaded documents."})]}),(0,t.jsx)(L.CardContent,{children:H?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(y.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):$&&$.length>0?(0,t.jsx)("div",{className:"space-y-4",children:$.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"font-medium",children:e.message||e.question}),e.autoAnswer&&(0,t.jsxs)("div",{className:"bg-muted rounded-md p-3 mt-2",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[(0,t.jsx)(C,{className:"h-3 w-3"})," AI Auto-Answer:"]}),(0,t.jsx)("p",{className:"text-sm",children:e.autoAnswer})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.shouldFlag&&(0,t.jsxs)(E.Badge,{variant:"destructive",children:[(0,t.jsx)(j,{className:"h-3 w-3 mr-1"}),"Flagged"]}),(0,t.jsx)(E.Badge,{variant:"answered"===e.status?"default":"closed"===e.status?"secondary":"outline",children:e.status})]})]}),e.organizerReply&&(0,t.jsxs)("div",{className:"bg-primary/5 rounded-md p-3",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Your Reply:"}),(0,t.jsx)("p",{className:"text-sm",children:e.organizerReply})]}),"open"===e.status&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.Input,{placeholder:"Type your reply...",value:es[e.id]||"",onChange:t=>ea(s=>({...s,[e.id]:t.target.value}))}),(0,t.jsx)(F.Button,{size:"icon",onClick:()=>eq(e.id),disabled:J.isPending,children:J.isPending?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(p,{className:"h-4 w-4"})}),(0,t.jsx)(F.Button,{size:"icon",variant:"outline",onClick:()=>ez(e.id),children:(0,t.jsx)(j,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.createdAt&&(0,t.jsxs)(t.Fragment,{children:["Created: ",(0,eF.format)(new Date(e.createdAt),"PPp")]}),e.confidence&&(0,t.jsxs)(t.Fragment,{children:[" • Confidence: ",Math.round(100*e.confidence),"%"]})]})]},e.id))}):(0,t.jsx)(S.EmptyState,{icon:o.MessageSquare,title:"No tickets yet",description:"Support tickets from attendees will appear here when they message your Telegram bot"})})]})})}),(0,t.jsx)(ec,{value:"registrations",className:"mt-6",children:(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Users,{className:"h-5 w-5"}),"Registrations"]}),(0,t.jsx)(L.CardDescription,{children:"View all registered attendees and their payment status"})]}),(0,t.jsx)(L.CardContent,{children:Q?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(y.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):O&&O.length>0?(0,t.jsxs)(eo,{children:[(0,t.jsx)(em,{children:(0,t.jsxs)(eu,{children:[(0,t.jsx)(eh,{children:"Name"}),(0,t.jsx)(eh,{children:"Email"}),(0,t.jsx)(eh,{children:"Phone"}),(0,t.jsx)(eh,{children:"Payment Status"}),(0,t.jsx)(eh,{children:"Registered"})]})}),(0,t.jsx)(ex,{children:O.map(e=>(0,t.jsxs)(eu,{children:[(0,t.jsx)(ep,{className:"font-medium",children:e.name}),(0,t.jsx)(ep,{children:e.email}),(0,t.jsx)(ep,{children:e.phone||"-"}),(0,t.jsx)(ep,{children:(0,t.jsx)(E.Badge,{variant:"completed"===e.paymentStatus||"paid"===e.paymentStatus?"default":"pending"===e.paymentStatus?"secondary":"destructive",children:"paid"===e.paymentStatus?"Paid":e.paymentStatus})}),(0,t.jsx)(ep,{children:(()=>{try{return e.createdAt?(0,eF.format)(new Date(e.createdAt),"PP"):"N/A"}catch{return"Invalid Date"}})()})]},e.id))})]}):(0,t.jsx)(S.EmptyState,{icon:m.Users,title:"No registrations yet",description:"Attendee registrations will appear here"})})]})})}),(0,t.jsx)(ec,{value:"poll",className:"mt-6",children:(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-xl",children:(0,t.jsxs)(L.Card,{children:[(0,t.jsxs)(L.CardHeader,{children:[(0,t.jsxs)(L.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.BarChart3,{className:"h-5 w-5"}),"Send Telegram Poll"]}),(0,t.jsx)(L.CardDescription,{children:"Create and send a poll to your event's Telegram group"})]}),(0,t.jsx)(L.CardContent,{className:"space-y-4",children:q.telegramChatId?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.Label,{htmlFor:"poll-question",children:"Question"}),(0,t.jsx)(I.Input,{id:"poll-question",placeholder:"What would you like to ask?",value:en,onChange:e=>ei(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(B.Label,{children:"Options"}),ew.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.Input,{placeholder:`Option ${s+1}`,value:e,onChange:e=>{let t=[...ew];t[s]=e.target.value,eI(t)}}),ew.length>2&&(0,t.jsx)(F.Button,{size:"icon",variant:"ghost",onClick:()=>{eI(ew.filter((e,t)=>t!==s))},children:(0,t.jsx)(g.X,{className:"h-4 w-4"})})]},s)),ew.length<10&&(0,t.jsx)(F.Button,{variant:"outline",size:"sm",onClick:()=>eI([...ew,""]),children:"Add Option"})]}),(0,t.jsx)(F.Button,{className:"w-full",onClick:e$,disabled:Y.isPending,children:Y.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"mr-2 h-4 w-4"}),"Send Poll"]})})]}):(0,t.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-center",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:"No Telegram Chat ID configured for this event. Please update the event settings to enable polls."})})})]})})}),(0,t.jsx)(ec,{value:"checkin",className:"mt-6",children:(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)(eg.QRCodeGenerator,{data:`${window.location.origin}/events/${q.code}`,title:"Event Registration QR Code",size:256,showDownload:!0,showShare:!0}),(0,t.jsx)(ef.QRCodeScanner,{onScan:e=>{eS.toast.success(`Scanned: ${e}`)},onError:e=>{eS.toast.error(e)},title:"Scan Attendee QR Code",description:"Scan attendee QR codes to check them in"})]})})]})]})}):(0,t.jsx)(P.DashboardLayout,{children:(0,t.jsx)(S.EmptyState,{icon:r.Calendar,title:"Event not found",description:"The event you're looking for doesn't exist or you don't have access to it.",actionLabel:"Back to Events",onAction:()=>R.push("/events")})})}e.s(["default",()=>eI],66088)}]);