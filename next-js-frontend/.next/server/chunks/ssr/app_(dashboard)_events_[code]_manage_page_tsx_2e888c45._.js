module.exports=[37407,a=>{"use strict";var b=a.i(46447),c=a.i(30564),d=a.i(1470),e=a.i(53615),f=a.i(11374),g=a.i(1556),h=a.i(38229),i=a.i(96926),j=a.i(70854),k=a.i(82634),l=a.i(6665),m=a.i(75686),n=a.i(61237);let o=(0,n.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),p=(0,n.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),q=(0,n.default)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var r=a.i(32267),s=a.i(88811),t=a.i(84435),u=a.i(6681);let v=(0,n.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var w=a.i(96826);let x=(0,n.default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),y=(0,n.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),z=(0,n.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),A=(0,n.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),B=(0,n.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var C=a.i(49291),D=a.i(97887),E=a.i(4170),F=a.i(40695),G=a.i(5522),H=a.i(3130),I=a.i(54161),J=a.i(17171),K=a.i(38032),L=a.i(2209),M=a.i(86725),N=a.i(68234),O=a.i(87695),P=a.i(53679),Q=a.i(20755),R=a.i(91586),S="Tabs",[T,U]=(0,L.createContextScope)(S,[M.createRovingFocusGroupScope]),V=(0,M.createRovingFocusGroupScope)(),[W,X]=T(S),Y=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,P.useDirection)(i),[m,n]=(0,Q.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(W,{scope:d,baseId:(0,R.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(O.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});Y.displayName=S;var Z="TabsList",$=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=X(Z,d),h=V(d);return(0,b.jsx)(M.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(O.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});$.displayName=Z;var _="TabsTrigger",aa=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=X(_,d),i=V(d),j=ad(h.baseId,e),k=ae(h.baseId,e),l=e===h.value;return(0,b.jsx)(M.Item,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(O.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,K.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,K.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,K.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});aa.displayName=_;var ab="TabsContent",ac=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=X(ab,e),k=ad(j.baseId,f),l=ae(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(N.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(O.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function ad(a,b){return`${a}-trigger-${b}`}function ae(a,b){return`${a}-content-${b}`}ac.displayName=ab;var af=a.i(97895);function ag({className:a,...c}){return(0,b.jsx)(Y,{"data-slot":"tabs",className:(0,af.cn)("flex flex-col gap-2",a),...c})}function ah({className:a,...c}){return(0,b.jsx)($,{"data-slot":"tabs-list",className:(0,af.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function ai({className:a,...c}){return(0,b.jsx)(aa,{"data-slot":"tabs-trigger",className:(0,af.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function aj({className:a,...c}){return(0,b.jsx)(ac,{"data-slot":"tabs-content",className:(0,af.cn)("flex-1 outline-none",a),...c})}function ak({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,af.cn)("w-full caption-bottom text-sm",a),...c})})}function al({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,af.cn)("[&_tr]:border-b",a),...c})}function am({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,af.cn)("[&_tr:last-child]:border-0",a),...c})}function an({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,af.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function ao({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,af.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function ap({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,af.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}a.i(89871);var aq=a.i(67135),ar=a.i(71961),as=a.i(28379),at=a.i(93902),au=a.i(13728),av=a.i(40278),aw=a.i(81154);let ax="http://localhost:5001/api",ay=async a=>{let b=await fetch(`${ax}/tickets/${a}`);if(!b.ok)throw Error("Failed to fetch tickets");let c=await b.json();return c.tickets||c},az=async({ticketId:a,answer:b})=>{let c=await fetch(`${ax}/tickets/${a}/reply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({replyText:b})});if(!c.ok)throw Error("Failed to reply to ticket");return c.json()},aA=async({ticketId:a,status:b})=>{let c=await fetch(`${ax}/tickets/${a}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})});if(!c.ok)throw Error("Failed to update ticket status");return c.json()},aB={all:["tickets"],lists:()=>[...aB.all,"list"],list:a=>[...aB.lists(),a]};var aC=a.i(16564);let aD=async a=>{let b=await fetch("http://localhost:5001/webhook/poll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).message||"Failed to send poll");return b.json()};var aE=a.i(56916),aF=a.i(73608);function aG(){let a,n,K=(0,d.useParams)(),L=(0,d.useRouter)(),M=K.code,{data:N,isLoading:O}=(0,at.useEvent)(M),{data:P,isLoading:Q}=(0,au.useQuery)({queryKey:aB.list(M),queryFn:()=>ay(M),enabled:!!M&&"undefined"!==M}),{data:R,isLoading:S}=(0,aC.useRegistrations)(M),{data:T,isLoading:U}=(0,at.useDocuments)(M),V=(0,at.useUploadDocument)(),W=(0,at.useUploadIndoorMap)(),X=(0,at.useDeleteDocument)(),Y=(a=(0,aw.useQueryClient)(),(0,av.useMutation)({mutationFn:a=>az(a),onSuccess:()=>{a.invalidateQueries({queryKey:aB.all})}})),Z=(n=(0,aw.useQueryClient)(),(0,av.useMutation)({mutationFn:a=>aA(a),onSuccess:()=>{n.invalidateQueries({queryKey:aB.all})}})),$=(0,av.useMutation)({mutationFn:a=>aD(a)}),_=(0,at.useDeleteEvent)(),[aa,ab]=(0,c.useState)("overview"),[ac,ad]=(0,c.useState)({}),[ae,af]=(0,c.useState)(""),[ax,aG]=(0,c.useState)(["",""]),[aH,aI]=(0,c.useState)(!1),aJ=async()=>{if(N&&confirm(`Are you sure you want to delete "${N.name}"? This action cannot be undone and will delete all associated registrations, tickets, and data.`)){aI(!0);try{await _.mutateAsync(N.id),aE.toast.success("Event deleted successfully"),L.push("/events")}catch(b){let a=b instanceof Error?b.message:"Failed to delete event";aE.toast.error(a),aI(!1)}}},aK=async a=>{let b=a.target.files?.[0];if(b)try{await V.mutateAsync({eventCode:M,file:b}),aE.toast.success("Document uploaded! Processing will begin shortly.")}catch{aE.toast.error("Failed to upload document")}},aL=async a=>{let b=a.target.files?.[0];if(b)try{await W.mutateAsync({eventCode:M,file:b}),aE.toast.success("Indoor map uploaded successfully!")}catch{aE.toast.error("Failed to upload indoor map")}},aM=async(a,b)=>{if(confirm(`Delete "${b}"? This will remove the document and all its indexed content from the AI knowledge base.`))try{await X.mutateAsync({eventCode:M,docId:a}),aE.toast.success("Document deleted successfully")}catch{aE.toast.error("Failed to delete document")}},aN=async a=>{let b=ac[a];if(b)try{await Y.mutateAsync({ticketId:a,answer:b}),ad(b=>({...b,[a]:""})),aE.toast.success("Reply sent successfully!")}catch{aE.toast.error("Failed to send reply")}},aO=async a=>{try{await Z.mutateAsync({ticketId:a,status:"flagged"}),aE.toast.success("Ticket flagged for review")}catch{aE.toast.error("Failed to flag ticket")}},aP=async()=>{if(!N?.telegramChatId)return void aE.toast.error("No Telegram chat ID configured for this event");if(!ae||ax.filter(a=>a.trim()).length<2)return void aE.toast.error("Please provide a question and at least 2 options");try{await $.mutateAsync({chatId:N.telegramChatId,question:ae,options:ax.filter(a=>a.trim())}),af(""),aG(["",""]),aE.toast.success("Poll sent successfully!")}catch{aE.toast.error("Failed to send poll")}};return O?(0,b.jsx)(C.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(t.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):N?(0,b.jsx)(C.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(D.PageHeader,{title:N.name,description:`Event Code: ${N.code}`,children:[(0,b.jsxs)(F.Button,{variant:"ghost",onClick:()=>L.push("/events"),children:[(0,b.jsx)(f.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,b.jsxs)(F.Button,{variant:"destructive",onClick:aJ,disabled:aH,children:[(0,b.jsx)(w.Trash2,{className:"mr-2 h-4 w-4"}),aH?"Deleting...":"Delete Event"]}),(0,b.jsxs)(F.Button,{variant:"outline",onClick:()=>window.open(`/events/${N.code}`,"_blank"),children:[(0,b.jsx)(s.ExternalLink,{className:"mr-2 h-4 w-4"}),"View Public Page"]})]}),(0,b.jsxs)(ag,{value:aa,onValueChange:ab,children:[(0,b.jsxs)(ah,{className:"grid w-full grid-cols-6",children:[(0,b.jsx)(ai,{value:"overview",children:"Overview"}),(0,b.jsx)(ai,{value:"documents",children:"Documents"}),(0,b.jsx)(ai,{value:"tickets",children:"Tickets"}),(0,b.jsx)(ai,{value:"registrations",children:"Registrations"}),(0,b.jsx)(ai,{value:"poll",children:"Poll"}),(0,b.jsx)(ai,{value:"checkin",children:"Check-In"})]}),(0,b.jsx)(aj,{value:"overview",className:"mt-6",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(H.Card,{children:[(0,b.jsx)(H.CardHeader,{children:(0,b.jsx)(H.CardTitle,{children:"Event Details"})}),(0,b.jsxs)(H.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(J.Label,{className:"text-muted-foreground",children:"Event Code"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"flex-1 rounded bg-muted px-3 py-2 font-mono",children:N.code}),(0,b.jsx)(F.Button,{size:"icon",variant:"outline",onClick:()=>{var a;return a=N.code,void(navigator.clipboard.writeText(a),aE.toast.success("Copied to clipboard!"))},children:(0,b.jsx)(u.Copy,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(J.Label,{className:"text-muted-foreground",children:"Description"}),(0,b.jsx)("p",{className:"text-sm",children:N.description})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(J.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(g.Calendar,{className:"h-4 w-4"}),"Date"]}),(0,b.jsx)("p",{className:"text-sm font-medium",children:(()=>{try{return(0,aF.format)(new Date(N.date),"PPP 'at' p")}catch{return"Invalid Date"}})()})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(J.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(i.DollarSign,{className:"h-4 w-4"}),"Price"]}),(0,b.jsxs)("p",{className:"text-sm font-medium",children:["₹",N.ticketPrice]})]})]})]})]}),(0,b.jsxs)(H.Card,{children:[(0,b.jsx)(H.CardHeader,{children:(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.MapPin,{className:"h-5 w-5"}),"Location"]})}),(0,b.jsxs)(H.CardContent,{className:"space-y-4",children:[(0,b.jsx)(aq.EventMap,{lat:N.lat,lng:N.lng,address:N.address,eventName:N.name,height:"250px"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(J.Label,{className:"text-muted-foreground",children:"Address"}),(0,b.jsx)("p",{className:"text-sm",children:N.address})]}),N.telegramChatId&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(J.Label,{className:"text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(k.MessageSquare,{className:"h-4 w-4"}),"Telegram Chat ID"]}),(0,b.jsx)("p",{className:"text-sm font-mono",children:N.telegramChatId})]})]})]})]})}),(0,b.jsx)(aj,{value:"documents",className:"mt-6",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,b.jsxs)(H.Card,{className:"border-primary/20 bg-primary/5",children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y,{className:"h-5 w-5"}),"AI Knowledge Base Status"]}),(0,b.jsx)(H.CardDescription,{children:"Documents uploaded here are processed, chunked, and indexed with Gemini embeddings for the Telegram bot to answer attendee questions."})]}),(0,b.jsx)(H.CardContent,{children:U?(0,b.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,b.jsx)(t.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):T?.stats?(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:T.stats.totalDocuments}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Documents"})]}),(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T.stats.indexedDocuments}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Indexed"})]}),(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:T.stats.processingDocuments}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Processing"})]}),(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:T.stats.totalChunks}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Text Chunks"})]}),(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 text-center",children:[(0,b.jsx)(I.Badge,{variant:T.stats.ragEnabled?"default":"secondary",className:"text-sm",children:T.stats.ragEnabled?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z,{className:"h-3 w-3 mr-1"})," RAG Active"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B,{className:"h-3 w-3 mr-1"})," No Data"]})}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:"Bot Status"})]})]}):(0,b.jsx)("div",{className:"text-center text-muted-foreground py-4",children:"No documents uploaded yet. Upload documents to enable AI-powered Q&A."})})]}),(0,b.jsxs)(H.Card,{children:[(0,b.jsx)(H.CardHeader,{children:(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"h-5 w-5"}),"How Document Indexing Works"]})}),(0,b.jsx)(H.CardContent,{children:(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,b.jsx)(o,{className:"h-5 w-5 text-primary"})}),(0,b.jsx)("div",{className:"font-medium",children:"1. Upload"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"Upload PDF, DOCX, or TXT files"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,b.jsx)(j.FileText,{className:"h-5 w-5 text-primary"})}),(0,b.jsx)("div",{className:"font-medium",children:"2. Parse & Chunk"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"Text extracted and split into chunks (~400 tokens each)"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,b.jsx)(x,{className:"h-5 w-5 text-primary"})}),(0,b.jsx)("div",{className:"font-medium",children:"3. Embed & Store"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"Gemini generates 768-dim embeddings, stored in Firestore"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center text-center p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:(0,b.jsx)(y,{className:"h-5 w-5 text-primary"})}),(0,b.jsx)("div",{className:"font-medium",children:"4. RAG Query"}),(0,b.jsx)("div",{className:"text-muted-foreground text-xs",children:"Bot retrieves relevant chunks via cosine similarity"})]})]})})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.FileText,{className:"h-5 w-5"}),"Upload Document"]}),(0,b.jsx)(H.CardDescription,{children:"Upload PDF, DOCX, or TXT files for the AI to answer questions from"})]}),(0,b.jsx)(H.CardContent,{children:(0,b.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[(0,b.jsx)(o,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)(J.Label,{htmlFor:"document-upload",className:"cursor-pointer text-primary hover:underline",children:"Click to upload or drag and drop"}),(0,b.jsx)(G.Input,{id:"document-upload",type:"file",accept:".pdf,.docx,.txt",className:"hidden",onChange:aK,disabled:V.isPending}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"PDF, DOCX, or TXT up to 10MB"}),V.isPending&&(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(t.Loader2,{className:"h-4 w-4 animate-spin"}),"Uploading..."]})]})})]}),(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v,{className:"h-5 w-5"}),"Indoor Map"]}),(0,b.jsx)(H.CardDescription,{children:"Upload a floor plan image for attendee navigation"})]}),(0,b.jsx)(H.CardContent,{children:(0,b.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[(0,b.jsx)(v,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)(J.Label,{htmlFor:"map-upload",className:"cursor-pointer text-primary hover:underline",children:"Click to upload or drag and drop"}),(0,b.jsx)(G.Input,{id:"map-upload",type:"file",accept:"image/*",className:"hidden",onChange:aL,disabled:W.isPending}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG, JPG, or WebP up to 5MB"}),W.isPending&&(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(t.Loader2,{className:"h-4 w-4 animate-spin"}),"Uploading..."]})]})})]})]}),(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.FileText,{className:"h-5 w-5"}),"Uploaded Documents"]}),(0,b.jsx)(H.CardDescription,{children:"Documents indexed for the AI knowledge base"})]}),(0,b.jsx)(H.CardContent,{children:U?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(t.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):T?.documents&&T.documents.length>0?(0,b.jsxs)(ak,{children:[(0,b.jsx)(al,{children:(0,b.jsxs)(an,{children:[(0,b.jsx)(ao,{children:"Filename"}),(0,b.jsx)(ao,{children:"Status"}),(0,b.jsx)(ao,{children:"Chunks"}),(0,b.jsx)(ao,{children:"Uploaded"}),(0,b.jsx)(ao,{children:"Indexed"}),(0,b.jsx)(ao,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(am,{children:T.documents.map(a=>(0,b.jsxs)(an,{children:[(0,b.jsx)(ap,{className:"font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.FileText,{className:"h-4 w-4 text-muted-foreground"}),a.filename]})}),(0,b.jsx)(ap,{children:"indexed"===a.status?(0,b.jsxs)(I.Badge,{variant:"default",className:"bg-green-600",children:[(0,b.jsx)(z,{className:"h-3 w-3 mr-1"}),"Indexed"]}):(0,b.jsxs)(I.Badge,{variant:"secondary",children:[(0,b.jsx)(A,{className:"h-3 w-3 mr-1 animate-spin"}),"Processing"]})}),(0,b.jsx)(ap,{children:(0,b.jsx)("span",{className:"font-mono text-sm",children:a.chunkCount})}),(0,b.jsx)(ap,{children:a.uploadedAt?(0,aF.format)(new Date(a.uploadedAt),"PP"):"N/A"}),(0,b.jsx)(ap,{children:a.processedAt?(0,aF.format)(new Date(a.processedAt),"PP p"):"-"}),(0,b.jsx)(ap,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[a.storageUrl&&(0,b.jsx)(F.Button,{size:"icon",variant:"ghost",onClick:()=>window.open(a.storageUrl,"_blank"),children:(0,b.jsx)(s.ExternalLink,{className:"h-4 w-4"})}),(0,b.jsx)(F.Button,{size:"icon",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>aM(a.id,a.filename),disabled:X.isPending,children:X.isPending?(0,b.jsx)(t.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(w.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]}):(0,b.jsx)(E.EmptyState,{icon:j.FileText,title:"No documents uploaded",description:"Upload documents to enable AI-powered Q&A for your attendees via the Telegram bot"})})]})]})}),(0,b.jsx)(aj,{value:"tickets",className:"mt-6",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(k.MessageSquare,{className:"h-5 w-5"}),"Support Tickets"]}),(0,b.jsx)(H.CardDescription,{children:"Manage questions from attendees via Telegram. The AI auto-answers questions using your uploaded documents."})]}),(0,b.jsx)(H.CardContent,{children:Q?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(t.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):P&&P.length>0?(0,b.jsx)("div",{className:"space-y-4",children:P.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-medium",children:a.message||a.question}),a.autoAnswer&&(0,b.jsxs)("div",{className:"bg-muted rounded-md p-3 mt-2",children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(y,{className:"h-3 w-3"})," AI Auto-Answer:"]}),(0,b.jsx)("p",{className:"text-sm",children:a.autoAnswer})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.shouldFlag&&(0,b.jsxs)(I.Badge,{variant:"destructive",children:[(0,b.jsx)(q,{className:"h-3 w-3 mr-1"}),"Flagged"]}),(0,b.jsx)(I.Badge,{variant:"answered"===a.status?"default":"closed"===a.status?"secondary":"outline",children:a.status})]})]}),a.organizerReply&&(0,b.jsxs)("div",{className:"bg-primary/5 rounded-md p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Your Reply:"}),(0,b.jsx)("p",{className:"text-sm",children:a.organizerReply})]}),"open"===a.status&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(G.Input,{placeholder:"Type your reply...",value:ac[a.id]||"",onChange:b=>ad(c=>({...c,[a.id]:b.target.value}))}),(0,b.jsx)(F.Button,{size:"icon",onClick:()=>aN(a.id),disabled:Y.isPending,children:Y.isPending?(0,b.jsx)(t.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p,{className:"h-4 w-4"})}),(0,b.jsx)(F.Button,{size:"icon",variant:"outline",onClick:()=>aO(a.id),children:(0,b.jsx)(q,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.createdAt&&(0,b.jsxs)(b.Fragment,{children:["Created: ",(0,aF.format)(new Date(a.createdAt),"PPp")]}),a.confidence&&(0,b.jsxs)(b.Fragment,{children:[" • Confidence: ",Math.round(100*a.confidence),"%"]})]})]},a.id))}):(0,b.jsx)(E.EmptyState,{icon:k.MessageSquare,title:"No tickets yet",description:"Support tickets from attendees will appear here when they message your Telegram bot"})})]})})}),(0,b.jsx)(aj,{value:"registrations",className:"mt-6",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-5 w-5"}),"Registrations"]}),(0,b.jsx)(H.CardDescription,{children:"View all registered attendees and their payment status"})]}),(0,b.jsx)(H.CardContent,{children:S?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(t.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):R&&R.length>0?(0,b.jsxs)(ak,{children:[(0,b.jsx)(al,{children:(0,b.jsxs)(an,{children:[(0,b.jsx)(ao,{children:"Name"}),(0,b.jsx)(ao,{children:"Email"}),(0,b.jsx)(ao,{children:"Phone"}),(0,b.jsx)(ao,{children:"Payment Status"}),(0,b.jsx)(ao,{children:"Registered"})]})}),(0,b.jsx)(am,{children:R.map(a=>(0,b.jsxs)(an,{children:[(0,b.jsx)(ap,{className:"font-medium",children:a.name}),(0,b.jsx)(ap,{children:a.email}),(0,b.jsx)(ap,{children:a.phone||"-"}),(0,b.jsx)(ap,{children:(0,b.jsx)(I.Badge,{variant:"completed"===a.paymentStatus||"paid"===a.paymentStatus?"default":"pending"===a.paymentStatus?"secondary":"destructive",children:"paid"===a.paymentStatus?"Paid":a.paymentStatus})}),(0,b.jsx)(ap,{children:(()=>{try{return a.createdAt?(0,aF.format)(new Date(a.createdAt),"PP"):"N/A"}catch{return"Invalid Date"}})()})]},a.id))})]}):(0,b.jsx)(E.EmptyState,{icon:l.Users,title:"No registrations yet",description:"Attendee registrations will appear here"})})]})})}),(0,b.jsx)(aj,{value:"poll",className:"mt-6",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-xl",children:(0,b.jsxs)(H.Card,{children:[(0,b.jsxs)(H.CardHeader,{children:[(0,b.jsxs)(H.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.BarChart3,{className:"h-5 w-5"}),"Send Telegram Poll"]}),(0,b.jsx)(H.CardDescription,{children:"Create and send a poll to your event's Telegram group"})]}),(0,b.jsx)(H.CardContent,{className:"space-y-4",children:N.telegramChatId?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(J.Label,{htmlFor:"poll-question",children:"Question"}),(0,b.jsx)(G.Input,{id:"poll-question",placeholder:"What would you like to ask?",value:ae,onChange:a=>af(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(J.Label,{children:"Options"}),ax.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(G.Input,{placeholder:`Option ${c+1}`,value:a,onChange:a=>{let b=[...ax];b[c]=a.target.value,aG(b)}}),ax.length>2&&(0,b.jsx)(F.Button,{size:"icon",variant:"ghost",onClick:()=>{aG(ax.filter((a,b)=>b!==c))},children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})]},c)),ax.length<10&&(0,b.jsx)(F.Button,{variant:"outline",size:"sm",onClick:()=>aG([...ax,""]),children:"Add Option"})]}),(0,b.jsx)(F.Button,{className:"w-full",onClick:aP,disabled:$.isPending,children:$.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{className:"mr-2 h-4 w-4"}),"Send Poll"]})})]}):(0,b.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-center",children:(0,b.jsx)("p",{className:"text-sm text-destructive",children:"No Telegram Chat ID configured for this event. Please update the event settings to enable polls."})})})]})})}),(0,b.jsx)(aj,{value:"checkin",className:"mt-6",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsx)(ar.QRCodeGenerator,{data:`/events/${N.code}`,title:"Event Registration QR Code",size:256,showDownload:!0,showShare:!0}),(0,b.jsx)(as.QRCodeScanner,{onScan:a=>{aE.toast.success(`Scanned: ${a}`)},onError:a=>{aE.toast.error(a)},title:"Scan Attendee QR Code",description:"Scan attendee QR codes to check them in"})]})})]})]})}):(0,b.jsx)(C.DashboardLayout,{children:(0,b.jsx)(E.EmptyState,{icon:g.Calendar,title:"Event not found",description:"The event you're looking for doesn't exist or you don't have access to it.",actionLabel:"Back to Events",onAction:()=>L.push("/events")})})}a.s(["default",()=>aG],37407)}];

//# sourceMappingURL=app_%28dashboard%29_events_%5Bcode%5D_manage_page_tsx_2e888c45._.js.map